(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"fT+Q":function(n,t,e){"use strict";e.r(t);var l=e("8Y7J");class i{}var u=e("pMnS"),r=e("aJJ8"),s=e("WS98"),o=e("d5rD"),c=e("iInd"),a=e("SVse");class h{transform(n,t){return t?n.sort((n,e)=>e[t].toString().localeCompare(n[t].toString())):n}}var b=e("+UQt"),d=e("HDdC"),p=e("DH7j"),k=e("n6bG"),f=e("lJxs"),g=e("7o/Q"),v=e("quSY");class m extends v.a{constructor(n,t){super()}schedule(n,t=0){return this}}class y extends m{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){if(this.closed)return this;this.state=n;const e=this.id,l=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(l,e,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(l,this.id,t),this}requestAsyncId(n,t,e=0){return setInterval(n.flush.bind(n,this),e)}recycleAsyncId(n,t,e=0){if(null!==e&&this.delay===e&&!1===this.pending)return t;clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const e=this._execute(n,t);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let e=!1,l=void 0;try{this.work(n)}catch(i){e=!0,l=!!i&&i||new Error(i)}if(e)return this.unsubscribe(),l}_unsubscribe(){const n=this.id,t=this.scheduler,e=t.actions,l=e.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==l&&e.splice(l,1),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null}}const x=(()=>{class n{constructor(t,e=n.now){this.SchedulerAction=t,this.now=e}schedule(n,t=0,e){return new this.SchedulerAction(this,n).schedule(e,t)}}return n.now=(()=>Date.now()),n})();class w extends x{constructor(n,t=x.now){super(n,()=>w.delegate&&w.delegate!==this?w.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(n,t=0,e){return w.delegate&&w.delegate!==this?w.delegate.schedule(n,t,e):super.schedule(n,t,e)}flush(n){const{actions:t}=this;if(this.active)return void t.push(n);let e;this.active=!0;do{if(e=n.execute(n.state,n.delay))break}while(n=t.shift());if(this.active=!1,e){for(;n=t.shift();)n.unsubscribe();throw e}}}const S=new w(y);class L{constructor(n,t){this.dueTime=n,this.scheduler=t}call(n,t){return t.subscribe(new A(n,this.dueTime,this.scheduler))}}class A extends g.a{constructor(n,t,e){super(n),this.dueTime=t,this.scheduler=e,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(O,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:n}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}}clearDebounce(){const n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)}}function O(n){n.debouncedNext()}class B{constructor(n,t){this.compare=n,this.keySelector=t}call(n,t){return t.subscribe(new C(n,this.compare,this.keySelector))}}class C extends g.a{constructor(n,t,e){super(n),this.keySelector=e,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(n,t){return n===t}_next(n){let t;try{const{keySelector:e}=this;t=e?e(n):n}catch(l){return this.destination.error(l)}let e=!1;if(this.hasKey)try{const{compare:n}=this;e=n(this.key,t)}catch(l){return this.destination.error(l)}else this.hasKey=!0;e||(this.key=t,this.destination.next(n))}}class M{constructor(n,t){this.booksService=n,this.route=t,this.groupBy="year",this.query=""}ngOnInit(){this.query=this.booksService.getQuery,this.fetchSubscription=this.booksService.onFetchBooks.subscribe(()=>{this.books=this.makeGroups()}),this.paramSubscription=this.route.params.subscribe(n=>{this.groupBy=n.groupBy,this.booksService.setSelectedGrouping=this.groupBy,this.books=this.makeGroups()}),this.inputSubscription=function n(t,e,l,i){return Object(k.a)(l)&&(i=l,l=void 0),i?n(t,e,l).pipe(Object(f.a)(n=>Object(p.a)(n)?i(...n):i(n))):new d.a(n=>{!function n(t,e,l,i,u){let r;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(t)){const n=t;t.addEventListener(e,l,u),r=(()=>n.removeEventListener(e,l,u))}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(t)){const n=t;t.on(e,l),r=(()=>n.off(e,l))}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(t)){const n=t;t.addListener(e,l),r=(()=>n.removeListener(e,l))}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let r=0,s=t.length;r<s;r++)n(t[r],e,l,i,u)}i.add(r)}(t,e,function(t){n.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},n,l)})}(this.searchInput.nativeElement,"keyup").pipe(function(n,t=S){return n=>n.lift(new L(600,t))}(),n=>n.lift(new B(void 0,void 0))).subscribe(()=>{this.booksService.fetchBooks().subscribe()})}onInput(n){this.booksService.setQuery=n.target.value}makeGroups(){const n=this.booksService.getBooks,t=this.groupBy;if("random"!==t){const e={};return n.reduce((n,l)=>{const i=l[t].toString(),u=e[i];if(u)u.books.push(l);else{const t=new b.a(i,[l]);n.push(t),e[i]=t}return n},[])}return[new b.a(t,this.shuffle(n))]}shuffle(n){let t,e,l=n.length;for(;0!==l;)e=Math.floor(Math.random()*l),t=n[l-=1],n[l]=n[e],n[e]=t;return n}ngOnDestroy(){this.fetchSubscription.unsubscribe(),this.paramSubscription.unsubscribe(),this.inputSubscription.unsubscribe()}}var _=l.kb({encapsulation:0,styles:[[".search[_ngcontent-%COMP%]{position:relative}.search[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:14px;left:14px}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:20px;color:#5a5a5a;padding:18px 0 13px 55px;background-color:transparent;border-radius:8px;border:3px solid #777;width:100%}.grouping[_ngcontent-%COMP%]{margin-top:28px}.grouping[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;color:#777;font-size:18px;margin-right:8px;padding:10px 15px 10px 18px;font-weight:700;cursor:pointer}.grouping[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#f15454;color:#fff;box-shadow:0 2px 3px rgba(34,34,34,.6);border-radius:19px}.list[_ngcontent-%COMP%]{margin-top:34px}.list[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{padding-bottom:47px;border-bottom:2px solid #535353}.list[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]:not(:first-child){margin-top:72px}.list[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{color:#aaa;font-size:32px}"]],data:{}});function I(n){return l.Bb(0,[(n()(),l.mb(0,0,null,null,5,"div",[["class","group"]],null,null,null,null,null)),(n()(),l.mb(1,0,null,null,2,"h2",[["class","group-name"]],null,null,null,null,null)),(n()(),l.zb(2,null,["",""])),l.wb(3,1),(n()(),l.mb(4,0,null,null,1,"app-book-list",[],null,null,null,r.b,r.a)),l.lb(5,114688,null,0,s.a,[o.a,c.l],{list:[0,"list"],autoSizing:[1,"autoSizing"]},null)],function(n,t){n(t,5,0,t.context.$implicit.books,!0)},function(n,t){var e=l.Ab(t,2,0,n(t,3,0,l.ub(t.parent.parent,1),t.context.$implicit.name));n(t,2,0,e)})}function P(n){return l.Bb(0,[(n()(),l.mb(0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),l.bb(16777216,null,null,2,null,I)),l.lb(2,278528,null,0,a.h,[l.M,l.J,l.q],{ngForOf:[0,"ngForOf"]},null),l.wb(3,2)],function(n,t){var e=t.component,i=l.Ab(t,2,0,n(t,3,0,l.ub(t.parent,0),e.books,"name"));n(t,2,0,i)},null)}function z(n){return l.Bb(0,[l.vb(0,h,[]),l.vb(0,a.n,[]),l.xb(402653184,1,{searchInput:0}),(n()(),l.mb(3,0,null,null,3,"section",[["class","search"]],null,null,null,null,null)),(n()(),l.mb(4,0,null,null,1,"i",[],null,null,null,null,null)),(n()(),l.mb(5,0,null,null,0,"img",[["src","assets/images/Search Icon.svg"]],null,null,null,null,null)),(n()(),l.mb(6,0,[[1,0],["searchInput",1]],null,0,"input",[["placeholder","Search by book name"],["type","text"]],[[8,"value",0]],[[null,"input"]],function(n,t,e){var l=!0;return"input"===t&&(l=!1!==n.component.onInput(e)&&l),l},null,null)),(n()(),l.mb(7,0,null,null,31,"section",[["class","grouping"]],null,null,null,null,null)),(n()(),l.mb(8,0,null,null,30,"ul",[],null,null,null,null,null)),(n()(),l.mb(9,0,null,null,5,"li",[["routerLink","/year"],["routerLinkActive","active"]],null,[[null,"click"]],function(n,t,e){var i=!0;return"click"===t&&(i=!1!==l.ub(n,10).onClick()&&i),i},null,null)),l.lb(10,16384,[[2,4]],0,c.m,[c.l,c.a,[8,null],l.B,l.k],{routerLink:[0,"routerLink"]},null),l.lb(11,1720320,null,2,c.n,[c.l,l.k,l.B,[2,c.m],[2,c.o]],{routerLinkActive:[0,"routerLinkActive"]},null),l.xb(603979776,2,{links:1}),l.xb(603979776,3,{linksWithHrefs:1}),(n()(),l.zb(-1,null,["Year"])),(n()(),l.mb(15,0,null,null,5,"li",[["routerLink","/writer"],["routerLinkActive","active"]],null,[[null,"click"]],function(n,t,e){var i=!0;return"click"===t&&(i=!1!==l.ub(n,16).onClick()&&i),i},null,null)),l.lb(16,16384,[[4,4]],0,c.m,[c.l,c.a,[8,null],l.B,l.k],{routerLink:[0,"routerLink"]},null),l.lb(17,1720320,null,2,c.n,[c.l,l.k,l.B,[2,c.m],[2,c.o]],{routerLinkActive:[0,"routerLinkActive"]},null),l.xb(603979776,4,{links:1}),l.xb(603979776,5,{linksWithHrefs:1}),(n()(),l.zb(-1,null,["Writer"])),(n()(),l.mb(21,0,null,null,5,"li",[["routerLink","/artist"],["routerLinkActive","active"]],null,[[null,"click"]],function(n,t,e){var i=!0;return"click"===t&&(i=!1!==l.ub(n,22).onClick()&&i),i},null,null)),l.lb(22,16384,[[6,4]],0,c.m,[c.l,c.a,[8,null],l.B,l.k],{routerLink:[0,"routerLink"]},null),l.lb(23,1720320,null,2,c.n,[c.l,l.k,l.B,[2,c.m],[2,c.o]],{routerLinkActive:[0,"routerLinkActive"]},null),l.xb(603979776,6,{links:1}),l.xb(603979776,7,{linksWithHrefs:1}),(n()(),l.zb(-1,null,["Artist"])),(n()(),l.mb(27,0,null,null,5,"li",[["routerLink","/owner"],["routerLinkActive","active"]],null,[[null,"click"]],function(n,t,e){var i=!0;return"click"===t&&(i=!1!==l.ub(n,28).onClick()&&i),i},null,null)),l.lb(28,16384,[[8,4]],0,c.m,[c.l,c.a,[8,null],l.B,l.k],{routerLink:[0,"routerLink"]},null),l.lb(29,1720320,null,2,c.n,[c.l,l.k,l.B,[2,c.m],[2,c.o]],{routerLinkActive:[0,"routerLinkActive"]},null),l.xb(603979776,8,{links:1}),l.xb(603979776,9,{linksWithHrefs:1}),(n()(),l.zb(-1,null,["Owner"])),(n()(),l.mb(33,0,null,null,5,"li",[["routerLink","/random"],["routerLinkActive","active"]],null,[[null,"click"]],function(n,t,e){var i=!0;return"click"===t&&(i=!1!==l.ub(n,34).onClick()&&i),i},null,null)),l.lb(34,16384,[[10,4]],0,c.m,[c.l,c.a,[8,null],l.B,l.k],{routerLink:[0,"routerLink"]},null),l.lb(35,1720320,null,2,c.n,[c.l,l.k,l.B,[2,c.m],[2,c.o]],{routerLinkActive:[0,"routerLinkActive"]},null),l.xb(603979776,10,{links:1}),l.xb(603979776,11,{linksWithHrefs:1}),(n()(),l.zb(-1,null,["Random"])),(n()(),l.mb(39,0,null,null,2,"section",[["class","list"]],null,null,null,null,null)),(n()(),l.bb(16777216,null,null,1,null,P)),l.lb(41,16384,null,0,a.i,[l.M,l.J],{ngIf:[0,"ngIf"]},null)],function(n,t){var e=t.component;n(t,10,0,"/year"),n(t,11,0,"active"),n(t,16,0,"/writer"),n(t,17,0,"active"),n(t,22,0,"/artist"),n(t,23,0,"active"),n(t,28,0,"/owner"),n(t,29,0,"active"),n(t,34,0,"/random"),n(t,35,0,"active"),n(t,41,0,e.books)},function(n,t){n(t,6,0,t.component.query)})}function j(n){return l.Bb(0,[(n()(),l.mb(0,0,null,null,1,"app-search",[],null,null,null,z,_)),l.lb(1,245760,null,0,M,[o.a,c.a],null,null)],function(n,t){n(t,1,0)},null)}var D=l.ib("app-search",M,j,{},{},[]),V=e("0yWZ"),W=e("PCNd");const E=(()=>{class n{constructor(n){this.booksService=n}resolve(n,t){return this.booksService.getBooks||this.booksService.fetchBooks()}}return n.ngInjectableDef=l.Db({factory:function(){return new n(l.Hb(o.a))},token:n,providedIn:"root"}),n})();e.d(t,"SearchModuleNgFactory",function(){return H});var H=l.jb(i,[],function(n){return l.sb([l.tb(512,l.j,l.W,[[8,[u.a,D]],[3,l.j],l.v]),l.tb(4608,a.k,a.j,[l.s,[2,a.r]]),l.tb(1073742336,a.b,a.b,[]),l.tb(1073742336,V.a,V.a,[]),l.tb(1073742336,W.a,W.a,[]),l.tb(1073742336,c.p,c.p,[[2,c.u],[2,c.l]]),l.tb(1073742336,i,i,[]),l.tb(1024,c.j,function(){return[[{path:"",redirectTo:"/year",pathMatch:"full"},{path:":groupBy",component:M,resolve:[E]}]]},[])])})}}]);